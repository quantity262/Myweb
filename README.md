# ä¸ªäººç½‘ç«™ - å‰åç«¯åˆ†ç¦»ç‰ˆæœ¬

è¿™æ˜¯ä¸€ä¸ªå‰åç«¯åˆ†ç¦»çš„ä¸ªäººç½‘ç«™é¡¹ç›®ï¼ŒåŒ…å«ç”¨æˆ·è®¤è¯ã€ç®¡ç†å‘˜åŠŸèƒ½å’Œæ–‡æ¡£ç®¡ç†ã€‚

> ğŸ“– **éƒ¨ç½²æŒ‡å—**: æŸ¥çœ‹ [éƒ¨ç½²æŒ‡å—.md](./éƒ¨ç½²æŒ‡å—.md) äº†è§£å¦‚ä½•å°†ç½‘ç«™éƒ¨ç½²åˆ°æœåŠ¡å™¨ï¼Œè®©å…¶ä»–äººä¹Ÿèƒ½è®¿é—®

## åŠŸèƒ½ç‰¹æ€§

- âœ… ç”¨æˆ·æ³¨å†Œå’Œç™»å½•
- âœ… JWT èº«ä»½è®¤è¯
- âœ… ç®¡ç†å‘˜åå°
- âœ… æ–‡æ¡£ç®¡ç†ï¼ˆMarkdownæ”¯æŒï¼‰
- âœ… ç…§ç‰‡è½®æ’­å±•ç¤º
- âœ… å“åº”å¼è®¾è®¡

## æŠ€æœ¯æ ˆ

### åç«¯
- Node.js + Express
- MySQL æ•°æ®åº“
- JWT è®¤è¯
- bcryptjs å¯†ç åŠ å¯†

### å‰ç«¯
- åŸç”Ÿ HTML/CSS/JavaScript
- Marked.js (Markdownæ¸²æŸ“)
- å“åº”å¼è®¾è®¡

## å¿«é€Ÿå¼€å§‹

### 1. å®‰è£…ä¾èµ–

```bash
npm install
```

### 2. å¯åŠ¨æœåŠ¡å™¨

```bash
npm start
```

æˆ–è€…ä½¿ç”¨å¼€å‘æ¨¡å¼ï¼ˆè‡ªåŠ¨é‡å¯ï¼‰ï¼š

```bash
npm run dev
```

### 3. è®¿é—®ç½‘ç«™

- å‰ç«¯åœ°å€ï¼šhttp://localhost:3000
- é»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ï¼š
  - ç”¨æˆ·åï¼š`admin`
  - å¯†ç ï¼š`admin123`

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ server.js              # æœåŠ¡å™¨å…¥å£æ–‡ä»¶
â”œâ”€â”€ package.json           # é¡¹ç›®é…ç½®
â”œâ”€â”€ database/              # æ•°æ®åº“ç›¸å…³
â”‚   â””â”€â”€ db.js             # æ•°æ®åº“åˆå§‹åŒ–
â”œâ”€â”€ routes/                # APIè·¯ç”±
â”‚   â”œâ”€â”€ auth.js           # è®¤è¯è·¯ç”±
â”‚   â”œâ”€â”€ admin.js          # ç®¡ç†å‘˜è·¯ç”±
â”‚   â””â”€â”€ content.js        # å†…å®¹è·¯ç”±
â”œâ”€â”€ middleware/            # ä¸­é—´ä»¶
â”‚   â””â”€â”€ auth.js           # è®¤è¯ä¸­é—´ä»¶
â””â”€â”€ public/                # å‰ç«¯é™æ€æ–‡ä»¶
    â”œâ”€â”€ index.html        # é¦–é¡µ
    â”œâ”€â”€ login.html        # ç™»å½•é¡µ
    â”œâ”€â”€ register.html     # æ³¨å†Œé¡µ
    â”œâ”€â”€ admin.html        # ç®¡ç†åå°
    â”œâ”€â”€ api.js            # APIå·¥å…·å‡½æ•°
    â”œâ”€â”€ script.js         # ä¸»è„šæœ¬
    â”œâ”€â”€ styles.css        # æ ·å¼æ–‡ä»¶
    â”œâ”€â”€ Myphoto/          # ç…§ç‰‡æ–‡ä»¶å¤¹
    â””â”€â”€ Mylog/            # æ–‡æ¡£æ–‡ä»¶å¤¹
```

## API æ¥å£

### è®¤è¯æ¥å£

- `POST /api/auth/register` - ç”¨æˆ·æ³¨å†Œ
- `POST /api/auth/login` - ç”¨æˆ·ç™»å½•
- `GET /api/auth/me` - è·å–å½“å‰ç”¨æˆ·ä¿¡æ¯

### å†…å®¹æ¥å£

- `GET /api/content/documents` - è·å–æ–‡æ¡£åˆ—è¡¨
- `GET /api/content/documents/:filename` - è·å–æ–‡æ¡£å†…å®¹

### ç®¡ç†å‘˜æ¥å£ï¼ˆéœ€è¦ç®¡ç†å‘˜æƒé™ï¼‰

- `GET /api/admin/users` - è·å–ç”¨æˆ·åˆ—è¡¨
- `DELETE /api/admin/users/:id` - åˆ é™¤ç”¨æˆ·
- `PATCH /api/admin/users/:id/role` - æ›´æ–°ç”¨æˆ·è§’è‰²
- `GET /api/admin/documents` - è·å–æ‰€æœ‰æ–‡æ¡£
- `POST /api/admin/documents` - åˆ›å»º/æ›´æ–°æ–‡æ¡£
- `DELETE /api/admin/documents/:id` - åˆ é™¤æ–‡æ¡£
- `POST /api/admin/documents/sync` - åŒæ­¥æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡æ¡£

## æ•°æ®åº“

ä½¿ç”¨ MySQL æ•°æ®åº“ã€‚

### é…ç½®æ•°æ®åº“

1. å®‰è£…MySQLï¼ˆå¦‚æœæ²¡æœ‰ï¼‰
2. åˆ›å»ºæ•°æ®åº“ï¼š
   ```sql
   CREATE DATABASE myweb CHARACTER SET utf8mb4 COLLATE utf8mb4_unicode_ci;
   ```
3. åˆ›å»º `.env` æ–‡ä»¶ï¼ˆå‚è€ƒ `.env.example`ï¼‰ï¼š
   ```env
   DB_HOST=localhost
   DB_USER=root
   DB_PASSWORD=ä½ çš„å¯†ç 
   DB_NAME=myweb
   JWT_SECRET=your-secret-key-change-in-production
   PORT=3000
   ```

è¯¦ç»†é…ç½®è¯´æ˜è¯·æŸ¥çœ‹ `æ•°æ®åº“é…ç½®è¯´æ˜.md`

### æ•°æ®è¡¨

- `users` - ç”¨æˆ·è¡¨
- `documents` - æ–‡æ¡£è¡¨

æœåŠ¡å™¨å¯åŠ¨æ—¶ä¼šè‡ªåŠ¨åˆ›å»ºè¡¨ç»“æ„ã€‚

## ç¯å¢ƒå˜é‡

å¯ä»¥åˆ›å»º `.env` æ–‡ä»¶é…ç½®ï¼š

```
PORT=3000
JWT_SECRET=your-secret-key-change-in-production
```

## æ³¨æ„äº‹é¡¹

1. é¦–æ¬¡è¿è¡Œä¼šè‡ªåŠ¨åˆ›å»ºé»˜è®¤ç®¡ç†å‘˜è´¦æˆ·ï¼ˆadmin/admin123ï¼‰
2. æ–‡æ¡£å¯ä»¥ä»æ–‡ä»¶ç³»ç»Ÿï¼ˆMylogæ–‡ä»¶å¤¹ï¼‰æˆ–æ•°æ®åº“åŠ è½½
3. ç®¡ç†å‘˜å¯ä»¥åœ¨åå°åŒæ­¥æ–‡ä»¶ç³»ç»Ÿä¸­çš„æ–‡æ¡£åˆ°æ•°æ®åº“
4. æ‰€æœ‰APIè¯·æ±‚ï¼ˆé™¤å…¬å¼€æ¥å£å¤–ï¼‰éƒ½éœ€è¦åœ¨Headerä¸­æºå¸¦JWT tokenï¼š`Authorization: Bearer <token>`

## å¼€å‘

ä½¿ç”¨ nodemon è¿›è¡Œå¼€å‘ï¼ˆè‡ªåŠ¨é‡å¯ï¼‰ï¼š

```bash
npm run dev
```

## è®¸å¯è¯

MIT

